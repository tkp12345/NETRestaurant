{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\roberto\\\\Desktop\\\\\\uC2A4\\uD130\\uB514\\\\Restaurant\\\\netrestaurantClient\\\\src\\\\context\\\\AuthForm.js\",\n    _s = $RefreshSig$();\n\nimport { React, children, useMemo, useState, createRef, createContext, useImperativeHandle, useCallback } from 'react';\nimport Login from '../layout/Login'; //context api 사용법 : https://kyounghwan01.github.io/blog/React/react-context-api/#api\n\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst AuthContext = /*#__PURE__*/createContext({}); //createRef 훅 사용법 : https://velog.io/@hoon_dev/React-Ref-%EC%9D%B4%EC%9A%A9%ED%95%98%EA%B8%B0feat-createRef\n\nconst contextRef = /*#__PURE__*/createRef();\n/*****************************************************************\r\n *  AUTH 기능 ContextApi 컴포넌트\r\n * \r\n * \r\n * authService : 권한 설정(로그인 , 로그아웃, 회원가입 , Auth) 클래스 \r\n * authController : 권한 설정 감지 \r\n *****************************************************************/\n\nconst AuthForm = _ref => {\n  _s();\n\n  let {\n    authService,\n    authController,\n    children\n  } = _ref;\n  const [isLogin, setIsLogin] = useState(false); //자식에있는 요소를 부모에서 호출하기 위한 훅 :https://developer-alle.tistory.com/372\n\n  useImperativeHandle(contextRef, () => isLogin ? isLogin.token : false); //service 주입 api 요청 \n\n  const onSignUp = useCallback(async (username, password, name, email) => {\n    console.log('회원가입....');\n    authService.signup(username, password, name, email).then(res => setIsLogin(res));\n  }, [authService]);\n  const onLogin = useCallback(async (username, password, name, email) => {\n    console.log('로그인....');\n    authService.login(username, password).then(res => {\n      setIsLogin(res);\n      console.log('res:', res);\n    });\n  }, [authService]);\n  const onLogout = useCallback(async (username, password, name, email) => {\n    authService.logout().then(() => setIsLogin(false));\n  }, [authService]); //contextApi 를 사용하기위한 상위 선언변수들을 넣어줍니다 \n\n  const contextForm = useMemo(() => ({\n    isLogin,\n    onSignUp,\n    onLogin,\n    onLogout\n  }), [isLogin, onSignUp, onLogin, onLogout]);\n  console.log('AuthForm- 로그인 확인:', isLogin);\n  return /*#__PURE__*/_jsxDEV(AuthContext.Provider, {\n    value: contextForm,\n    children: isLogin ? //하위 요소 호출 \n    children : /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Login, {\n        onSignUp: onSignUp,\n        onLogin: onLogin\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 63,\n        columnNumber: 21\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 62,\n      columnNumber: 17\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 57,\n    columnNumber: 9\n  }, this);\n};\n\n_s(AuthForm, \"aP19JDefFXGM/7DcbqnU9jP66iM=\");\n\n_c = AuthForm;\nexport default AuthForm;\n\nvar _c;\n\n$RefreshReg$(_c, \"AuthForm\");","map":{"version":3,"sources":["C:/Users/roberto/Desktop/스터디/Restaurant/netrestaurantClient/src/context/AuthForm.js"],"names":["React","children","useMemo","useState","createRef","createContext","useImperativeHandle","useCallback","Login","AuthContext","contextRef","AuthForm","authService","authController","isLogin","setIsLogin","token","onSignUp","username","password","name","email","console","log","signup","then","res","onLogin","login","onLogout","logout","contextForm"],"mappings":";;;AAAA,SAAQA,KAAR,EAAcC,QAAd,EAAuBC,OAAvB,EAA+BC,QAA/B,EAAwCC,SAAxC,EAAkDC,aAAlD,EAAgEC,mBAAhE,EAAoFC,WAApF,QAAsG,OAAtG;AACA,OAAOC,KAAP,MAAkB,iBAAlB,C,CAGA;;;AACA,MAAMC,WAAW,gBAAGJ,aAAa,CAAC,EAAD,CAAjC,C,CAEA;;AACA,MAAMK,UAAU,gBAAGN,SAAS,EAA5B;AAGA;AACA;AACA;AACA;AACA;AACA;AACA;;AACA,MAAMO,QAAQ,GAAG,QAA2C;AAAA;;AAAA,MAA1C;AAACC,IAAAA,WAAD;AAAaC,IAAAA,cAAb;AAA4BZ,IAAAA;AAA5B,GAA0C;AAC5D,QAAM,CAACa,OAAD,EAASC,UAAT,IAAuBZ,QAAQ,CAAC,KAAD,CAArC,CAD4D,CAG1D;;AACAG,EAAAA,mBAAmB,CAACI,UAAD,EAAa,MAAOI,OAAO,GAAGA,OAAO,CAACE,KAAX,GAAmB,KAA9C,CAAnB,CAJ0D,CAM5D;;AACA,QAAMC,QAAQ,GAAEV,WAAW,CAAC,OAAOW,QAAP,EAAgBC,QAAhB,EAAyBC,IAAzB,EAA8BC,KAA9B,KAAsC;AAC1DC,IAAAA,OAAO,CAACC,GAAR,CAAY,UAAZ;AACJX,IAAAA,WAAW,CAACY,MAAZ,CAAmBN,QAAnB,EAA4BC,QAA5B,EAAqCC,IAArC,EAA0CC,KAA1C,EACCI,IADD,CACOC,GAAD,IAAOX,UAAU,CAACW,GAAD,CADvB;AAEH,GAJ0B,EAIzB,CAACd,WAAD,CAJyB,CAA3B;AAMA,QAAMe,OAAO,GAAEpB,WAAW,CAAC,OAAOW,QAAP,EAAgBC,QAAhB,EAAyBC,IAAzB,EAA8BC,KAA9B,KAAsC;AAC7DC,IAAAA,OAAO,CAACC,GAAR,CAAY,SAAZ;AACAX,IAAAA,WAAW,CAACgB,KAAZ,CAAkBV,QAAlB,EAA4BC,QAA5B,EACCM,IADD,CACOC,GAAD,IAAQ;AAACX,MAAAA,UAAU,CAACW,GAAD,CAAV;AACVJ,MAAAA,OAAO,CAACC,GAAR,CAAY,MAAZ,EAAmBG,GAAnB;AAAwB,KAF7B;AAGH,GALyB,EAKxB,CAACd,WAAD,CALwB,CAA1B;AAMA,QAAMiB,QAAQ,GAAEtB,WAAW,CAAC,OAAOW,QAAP,EAAgBC,QAAhB,EAAyBC,IAAzB,EAA8BC,KAA9B,KAAsC;AAC9DT,IAAAA,WAAW,CAACkB,MAAZ,GACCL,IADD,CACM,MAAMV,UAAU,CAAC,KAAD,CADtB;AAEH,GAH0B,EAGzB,CAACH,WAAD,CAHyB,CAA3B,CAnB4D,CAwB5D;;AACA,QAAMmB,WAAW,GAAG7B,OAAO,CAAC,OAAK;AAC7BY,IAAAA,OAD6B;AAE7BG,IAAAA,QAF6B;AAG7BU,IAAAA,OAH6B;AAI7BE,IAAAA;AAJ6B,GAAL,CAAD,EAKxB,CAACf,OAAD,EACCG,QADD,EAECU,OAFD,EAGCE,QAHD,CALwB,CAA3B;AAUAP,EAAAA,OAAO,CAACC,GAAR,CAAY,mBAAZ,EAAgCT,OAAhC;AAEI,sBACI,QAAC,WAAD,CAAa,QAAb;AAAsB,IAAA,KAAK,EAAEiB,WAA7B;AAAA,cACKjB,OAAO,GACJ;AACAb,IAAAA,QAFI,gBAIJ;AAAA,6BACI,QAAC,KAAD;AAAO,QAAA,QAAQ,EAAEgB,QAAjB;AAA2B,QAAA,OAAO,EAAEU;AAApC;AAAA;AAAA;AAAA;AAAA;AADJ;AAAA;AAAA;AAAA;AAAA;AALR;AAAA;AAAA;AAAA;AAAA,UADJ;AAYH,CAjDD;;GAAMhB,Q;;KAAAA,Q;AAmDN,eAAeA,QAAf","sourcesContent":["import {React,children,useMemo,useState,createRef,createContext,useImperativeHandle,useCallback} from 'react';\r\nimport Login from '../layout/Login';\r\n\r\n\r\n//context api 사용법 : https://kyounghwan01.github.io/blog/React/react-context-api/#api\r\nconst AuthContext = createContext({});\r\n\r\n//createRef 훅 사용법 : https://velog.io/@hoon_dev/React-Ref-%EC%9D%B4%EC%9A%A9%ED%95%98%EA%B8%B0feat-createRef\r\nconst contextRef = createRef();\r\n\r\n\r\n/*****************************************************************\r\n *  AUTH 기능 ContextApi 컴포넌트\r\n * \r\n * \r\n * authService : 권한 설정(로그인 , 로그아웃, 회원가입 , Auth) 클래스 \r\n * authController : 권한 설정 감지 \r\n *****************************************************************/\r\nconst AuthForm = ({authService,authController,children}) => {\r\nconst [isLogin,setIsLogin] = useState(false);\r\n\r\n  //자식에있는 요소를 부모에서 호출하기 위한 훅 :https://developer-alle.tistory.com/372\r\n  useImperativeHandle(contextRef, () => (isLogin ? isLogin.token : false));\r\n\r\n//service 주입 api 요청 \r\nconst onSignUp =useCallback(async (username,password,name,email)=>{\r\n        console.log('회원가입....')\r\n    authService.signup(username,password,name,email)\r\n    .then((res)=>setIsLogin(res))\r\n},[authService]);\r\n\r\nconst onLogin =useCallback(async (username,password,name,email)=>{\r\n    console.log('로그인....')\r\n    authService.login(username, password)\r\n    .then((res)=> {setIsLogin(res)\r\n         console.log('res:',res)})\r\n},[authService]);\r\nconst onLogout =useCallback(async (username,password,name,email)=>{\r\n    authService.logout()\r\n    .then(() => setIsLogin(false))\r\n},[authService]);\r\n\r\n//contextApi 를 사용하기위한 상위 선언변수들을 넣어줍니다 \r\nconst contextForm = useMemo(()=>({\r\n    isLogin,\r\n    onSignUp,\r\n    onLogin,\r\n    onLogout,\r\n}),[isLogin,\r\n    onSignUp,\r\n    onLogin,\r\n    onLogout]);\r\n\r\nconsole.log('AuthForm- 로그인 확인:',isLogin)\r\n\r\n    return (\r\n        <AuthContext.Provider value={contextForm}>\r\n            {isLogin?(\r\n                //하위 요소 호출 \r\n                children\r\n            ):(\r\n                <div>\r\n                    <Login onSignUp={onSignUp} onLogin={onLogin}/>\r\n                </div>\r\n            )}\r\n        </AuthContext.Provider>\r\n    );\r\n};\r\n\r\nexport default AuthForm;"]},"metadata":{},"sourceType":"module"}